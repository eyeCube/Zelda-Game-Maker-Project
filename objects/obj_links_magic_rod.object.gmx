<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_links_magic_rod</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>2</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>can_destroy=0

image_speed=0

can_charge=0
charge=0
charge_requirement=global.magic_rod_charge
can_fire=0
//how long it takes to fire the regular bolt.
fire_charge=0

has_fired=0

doomed=0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//debug

with obj_link
{
    if sprite_index!=spr_link_knocked_down
    {
        
        can_move=1
        sprite_index=spr_link_walking
        hurt_sprite=spr_link_walking_hurt
            
    }
        

while image_index&lt;0 image_index+=4

image_index=(image_index mod 4)

}



if has_fired=0
if spell="Magic"
{

    obj=instance_create(x,y,obj_links_bolt)
    obj.spell=spell
    obj.sprite_index=spr_magic_bolt
    obj.particle_sprite=spr_magic_particle
    obj.damage=global.magic_wand_damage
    obj.speed=global.magic_wand_speed
    obj.direction=obj_link.image_index_drawn*90
    obj.alarm[10]=global.magic_wand_time

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>x+=xt3
y+=yt3
image_index=image_index_2

can_fire=1

alarm[1]=2


var go;
go=1

if keyboard_check(ord('V'))
if global.item_V="Magic Rod"
go=0
if keyboard_check(ord('C'))
if global.item_C="Magic Rod"
go=0
if keyboard_check(ord('X'))
if global.item_X="Magic Rod"
go=0
if keyboard_check(ord('Z'))
if global.item_Z="Magic Rod"
go=0


if fire_charge&gt;0
go=0



//////////////////////////////////////////////////////////////////////
if has_fired=1
exit
if go=0
exit
//////////////////////////////////////////////////////////////////////


has_fired=1



//create the magic spell

if spell="Magic"
{

    obj=instance_create(x,y,obj_links_bolt)
    obj.spell=spell
    obj.sprite_index=spr_magic_bolt
    obj.particle_sprite=spr_magic_particle
    obj.damage=global.magic_wand_damage
    obj.speed=global.magic_wand_speed
    obj.direction=obj_link.image_index_drawn*90
    obj.alarm[10]=global.magic_wand_time

}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if doomed=1
{
    instance_destroy()
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>x+=xt2
y+=yt2
image_index=image_index_1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>can_destroy=1

var go;
go=1

if keyboard_check(ord('V'))
if global.item_V="Magic Rod"
go=0
if keyboard_check(ord('C'))
if global.item_C="Magic Rod"
go=0
if keyboard_check(ord('X'))
if global.item_X="Magic Rod"
go=0
if keyboard_check(ord('Z'))
if global.item_Z="Magic Rod"
go=0

if go=1
or has_fired=1
instance_destroy()

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>depth=0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if obj_link.hit&gt;0
or obj_link.knockback&gt;0
{
    doomed=1
}
if obj_link.sprite_index=spr_link_knocked_down
instance_destroy()
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if keyboard_check(ord('V'))
if global.item_V="Magic Rod"
{
    charge+=1
}
if keyboard_check(ord('C'))
if global.item_C="Magic Rod"
{
    charge+=1
}
if keyboard_check(ord('X'))
if global.item_X="Magic Rod"
{
    charge+=1
}
if keyboard_check(ord('Z'))
if global.item_Z="Magic Rod"
{
    charge+=1
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>    var go;
    go=0
    
    
    if keyboard_check(ord('V'))=0
    if global.item_V="Magic Rod"
    {
        go=1
    }
    if keyboard_check(ord('C'))=0
    if global.item_C="Magic Rod"
    {
        go=1
    }
    if keyboard_check(ord('X'))=0
    if global.item_X="Magic Rod"
    {
        go=1
    }
    if keyboard_check(ord('Z'))=0
    if global.item_Z="Magic Rod"
    {
        go=1
    }
    
    
    
    //////////////////////////////////////////////////////////////////////
    if go=0
    exit
    if has_fired=1
    {
        if alarm[1]&lt;=0
        instance_destroy()
        exit
    }
    if charge&lt;fire_charge
    if can_destroy=1
    instance_destroy()
    if can_fire=0
    exit
    //////////////////////////////////////////////////////////////////////
    
    
    has_fired=1
    
    
    
    if spell="Magic"
    {
    
        if charge&gt;=charge_requirement
        {
    
            obj=instance_create(x,y,obj_links_bolt)
            obj.spell=spell
            obj.sprite_index=spr_magic_bolt_large
            obj.particle_sprite=spr_magic_particle
            obj.damage=global.magic_rod_charge_damage
            obj.speed=global.magic_rod_charge_speed
            obj.direction=obj_link.image_index_drawn*90
            obj.alarm[10]=global.magic_rod_charge_time
            instance_destroy()
            
        
        }
        
        else
        
        {
        
            obj=instance_create(x,y,obj_links_bolt)
            obj.spell=spell
            obj.sprite_index=spr_magic_bolt
            obj.particle_sprite=spr_magic_particle
            obj.damage=global.magic_wand_damage
            obj.speed=global.magic_wand_speed
            obj.direction=obj_link.image_index_drawn*90
            obj.alarm[10]=global.magic_wand_time
            instance_destroy()
        
        }
    
    }
    
    
    
    if spell="Fire"
    {
    
        if charge&gt;=charge_requirement
        {
    
            obj=instance_create(x,y,obj_links_bolt)
            obj.spell=spell
            obj.sprite_index=spr_fire_ball_giant
            obj.particle_sprite=spr_fire_ball_large
            obj.damage=global.magic_rod_fire_ball_charge_damage
            obj.speed=global.magic_rod_fire_ball_charge_speed
            obj.direction=obj_link.image_index_drawn*90
            obj.image_angle=direction
            obj.alarm[10]=global.magic_rod_fire_ball_charge_time
            instance_destroy()
            
        
        }
        
        else
        if charge&gt;=fire_charge
        {
        
            obj=instance_create(x,y,obj_links_bolt)
            obj.spell=spell
            obj.sprite_index=spr_fire_ball_large
            obj.particle_sprite=spr_fire_ball_large
            obj.damage=global.magic_wand_fire_ball_damage
            obj.speed=global.magic_wand_fire_ball_speed
            obj.direction=obj_link.image_index_drawn*90
            obj.image_angle=direction
            obj.alarm[10]=global.magic_wand_fire_ball_time
            instance_destroy()
        
        }
    
    }
    
    if spell="Wind"
    {
    
        if charge&gt;=charge_requirement
        {
    
            
        
        }
        
        else
        if charge&gt;=fire_charge
        {
        
            obj_link.windy=1
            obj_link.alarm[7]=obj_link.alarm7
            global.link_speed_boost=global.farore_speed_boost
            instance_destroy()
        
        }
    
    }
    
    
    if spell="Ice"
    {
    
        if charge&gt;=charge_requirement
        {
    
            obj=instance_create(x,y,obj_links_bolt)
            obj.spell=spell
            obj.sprite_index=spr_ice_ball_giant
            obj.particle_sprite=spr_ice_particle
            obj.damage=global.magic_rod_ice_ball_charge_damage
            obj.speed=global.magic_rod_ice_ball_charge_speed
            obj.direction=obj_link.image_index_drawn*90
            obj.alarm[10]=global.magic_wand_ice_ball_time
            instance_destroy()
            
        }
        
        else
        if charge&gt;=fire_charge
        {
    
            obj=instance_create(x,y,obj_links_bolt)
            obj.spell=spell
            obj.sprite_index=spr_ice_ball_large
            obj.particle_sprite=spr_ice_particle
            obj.damage=global.magic_wand_ice_ball_damage
            obj.speed=global.magic_wand_ice_ball_speed
            obj.direction=obj_link.image_index_drawn*90
            obj.alarm[10]=global.magic_wand_ice_ball_time
            instance_destroy()
        
        }
    
    }
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if obj_link.visible=0
instance_destroy()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite(sprite_index,image_index,round(x),round(y))

var temp_dir;
temp_dir=obj_link.image_index*90
        
if charge&gt;=charge_requirement
{

    
    if spell="Magic"
    draw_sprite(spr_magic_bolt_large,is_even(charge),round(x+lengthdir_x(14,temp_dir)),round(y+lengthdir_y(14,temp_dir)))
    if spell="Fire"
    draw_sprite(spr_fire_ball_giant,is_even(charge),round(x+lengthdir_x(14,temp_dir)),round(y+lengthdir_y(14,temp_dir)))
    if spell="Ice"
    draw_sprite(spr_ice_ball_giant,is_even(charge),round(x+lengthdir_x(14,temp_dir)),round(y+lengthdir_y(14,temp_dir)))

}

else
if charge&gt;=fire_charge
{
    if spell="Ice"
    {
        draw_sprite(spr_ice_ball_large,is_even(charge),round(x+lengthdir_x(14,temp_dir)),round(y+lengthdir_y(14,temp_dir)))
    
    }
        if spell="Fire"
    {
    
        
        draw_sprite_ext(spr_fire_ball_large,is_even(charge),round(x+lengthdir_x(17,temp_dir)),round(y+lengthdir_y(17,temp_dir)),1,1,270,c_white,1)
    
    }
        if spell="Magic"
        if can_fire=1
        if has_fired=0
    {
        
        draw_sprite(spr_magic_bolt,is_even(charge),round(x+lengthdir_x(14,temp_dir)),round(y+lengthdir_y(14,temp_dir)))
    
    }
    if spell="Wind"
        if can_fire=1
        if has_fired=0
    {
        
        draw_sprite(spr_tornado_small,is_even(charge),round(x+lengthdir_x(14,temp_dir)),round(y+lengthdir_y(14,temp_dir)))
    
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
